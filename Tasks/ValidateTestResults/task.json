{
    "id": "19c0dd1b-95ac-40d0-abff-f640781dc18d",
    "name": "ValidateTestResults",
    "friendlyName": "Validate Test Results",
    "description": "Validates test results attached to Build.",
    "helpMarkDown": "",
    "category": "Test",
    "visibility": [
        "Build",
        "Release"
    ],
    "author": "Adeptik",
    "version": {
        "Major": 0,
        "Minor": 1,
        "Patch": 0
    },
    "preview": true,
    "runsOn": [
        "Server"
    ],
    "demands": [],
    "instanceNameFormat": "Validate Test Results",
    "inputs": [],
    "execution": {
        "HttpRequest": {
            "Execute": {
                "EndpointId": "",
                "EndpointUrl": "$(system.teamFoundationCollectionUri)$(System.TeamProject)/_apis/test/ResultSummaryByBuild?buildId=$(Build.BuildId)",
                "Method": "GET",
                "Body": "",
                "Headers": "{\n\"Content-Type\":\"application/json\"\n, \"Authorization\":\"Bearer $(system.accesstoken)\"\n}",
                "WaitForCompletion": "false",
                "Expression": "le(0, jsonpath('$.aggregatedResultsAnalysis.totalTests')[0])"
            }
        }
    }
}